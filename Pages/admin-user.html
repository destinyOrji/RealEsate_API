<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Users - CAM-GD Homes</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="dark-mode.css">

  <style>
     body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f7f7f7;
    }
    .sidebar {
      width: 250px;
      height: 100vh;
      background-color: #002147;
      position: fixed;
      color: white;
      padding-top: 1rem;
    }
    .sidebar .nav-link {
      color: white;
      margin-bottom: 1rem;
    }
    .content {
      margin-left: 250px;
      padding: 2rem;
    }
    .profile-img {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      object-fit: cover;
    }
  </style>
</head>
<body>

  <!-- Sidebar -->
  <aside class="sidebar d-flex flex-column align-items-start p-3">
    <h5 class="text-white mb-4 fs-6 fw-semibold">CAM-<span class="text-warning">GD</span> HOMES </h5> 
    <a class="nav-link active" href="/Pages/Dashboards/admin-dashboard.html"><i class="bi bi-house"></i> Dashboard</a>
    <a class="nav-link" href="/Pages/admin-properties.html"><i class="bi bi-building"></i> Properties</a>
    <a class="nav-link" href="/Pages/admin-user.html"><i class="bi bi-people"></i> Users</a>
     <a class="nav-link" href="/Pages/admin-agent-contact.html"><i class="bi bi-headset"></i> Agent Contact</a>
    <a class="nav-link" href="/Pages/admin-contact.html"><i class="bi bi-chat-left-text"></i> Contact</a>
    <a class="nav-link" href="/Pages/admin-setting.html"><i class="bi bi-gear"></i> Settings</a>
    <a class="nav-link mt-auto" href="/Pages/auth/admin-login.html"><i class="bi bi-box-arrow-right"></i> Log Out</a>
  </aside>

  <!-- Content -->
  <div class="content">
    <!-- Top bar -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h4>Good morning, Mr. Moses.</h4>
      <div class="d-flex align-items-center">
        <input class="form-control me-2" type="search" placeholder="Search users..." style="width: 300px;">
        <i class="bi bi-bell fs-4 me-3"></i>
        <div class="d-flex align-items-center">
          <div class="me-2">Moses Gideonfia <span class="text-muted">Admin</span></div>
          <img src="https://i.pravatar.cc/32" alt="profile" class="profile-img me-2"/>
        </div>
      </div>
    </div>

  
   <!-- Users Table -->
<div class="card">
  <div class="card-header bg-white fw-semibold d-flex justify-content-between align-items-center">
    <span>Registered Users</span>
    <!-- Add User Button -->
    <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addUserModal">
      <i class="bi bi-person-plus"></i> Add User
    </button>
  </div>

  <div class="card-body p-0">
    <table class="table table-hover mb-0">
      <thead class="table-light">
        <tr>
          <th>Sn</th>
          <th>Name</th>
          <th>Email</th>
          <th>Role</th>
          <th>Date Joined</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="usersTable">
        <tr>
          <td>1</td>
          <td>John Doe</td>
          <td>johndoe@example.com</td>
          <td><span class="badge bg-primary">Buyer</span></td>
          <td>2025-08-11</td>
          <td>
            <button class="btn btn-sm btn-outline-primary me-1"><i class="bi bi-eye"></i></button>
            <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
          </td>
        </tr>
        <tr>
          <td>2</td>
          <td>Jane Smith</td>
          <td>jane@example.com</td>
          <td><span class="badge bg-success">Agent</span></td>
          <td>2025-08-10</td>
          <td>
            <button class="btn btn-sm btn-outline-primary me-1"><i class="bi bi-eye"></i></button>
            <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>


  

<!-- Add User Modal -->
<div class="modal fade" id="addUserModal" tabindex="-1" aria-labelledby="addUserModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <form id="addUserForm">
        <div class="modal-header">
          <h5 class="modal-title" id="addUserModalLabel">Add New User</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body row g-3">
          <!-- Personal Info -->
          <div class="col-md-6">
            <label class="form-label">First Name</label>
            <input type="text" class="form-control" name="firstName" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Last Name</label>
            <input type="text" class="form-control" name="lastName" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Gmail</label>
            <input type="email" class="form-control" name="email" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Username</label>
            <input type="text" class="form-control" name="username" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Phone Number</label>
            <input type="tel" class="form-control" name="phone" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Address</label>
            <input type="text" class="form-control" name="address" required>
          </div>
          <div class="col-md-4">
            <label class="form-label">City</label>
            <input type="text" class="form-control" name="city">
          </div>
          <div class="col-md-4">
            <label class="form-label">State</label>
            <input type="text" class="form-control" name="state">
          </div>
          <div class="col-md-4">
            <label class="form-label">Postal Code</label>
            <input type="text" class="form-control" name="postalCode" >
          </div>
          <div class="col-md-6">
            <label class="form-label">Date of Birth</label>
            <input type="date" class="form-control" name="dob" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Gender</label>
            <select class="form-select" name="gender" required>
              <option value="">Select</option>
              <option>Male</option>
              <option>Female</option>
            </select>
          </div>

          <!-- Bank Info -->
          <div class="col-md-4">
            <label class="form-label">ID</label>
            <input type="text" class="form-control" name="id" required>
          </div>
          <div class="col-md-4">
            <label class="form-label">Account Number</label>
            <input type="text" class="form-control" name="accountNumber">
          </div>
          <div class="col-md-4">
            <label class="form-label">Bank</label>
            <input type="text" class="form-control" name="bank">
          </div>
          <div class="col-md-6">
            <label class="form-label">Account Name</label>
            <input type="text" class="form-control" name="accountName">
          </div>

          <!-- Role -->
          <div class="col-md-6">
            <label class="form-label">Role</label>
            <select class="form-select" name="role" required>
              <option value="">Select Role</option>
              <option>Buyer</option>
              <option>Agent</option>
              <option>Admin</option>
            </select>
          </div>
        </div>

        <div class="modal-footer">
          <button type="submit" class="btn btn-success">Submit</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- User Details Modal -->
<div class="modal fade" id="userDetailsModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">User Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <ul class="list-group">
          <li class="list-group-item"><strong>Name:</strong> <span id="detailName"></span></li>
          <li class="list-group-item"><strong>Email:</strong> <span id="detailEmail"></span></li>
          <li class="list-group-item"><strong>Role:</strong> <span id="detailRole"></span></li>
          <li class="list-group-item"><strong>Phone:</strong> <span id="detailPhone"></span></li>
          <li class="list-group-item"><strong>Address:</strong> <span id="detailAddress"></span></li>
          <li class="list-group-item"><strong>City:</strong> <span id="detailCity"></span></li>
          <li class="list-group-item"><strong>State:</strong> <span id="detailState"></span></li>
          <li class="list-group-item"><strong>Postal Code:</strong> <span id="detailPostal"></span></li>
          <li class="list-group-item"><strong>Date of Birth:</strong> <span id="detailDob"></span></li>
          <li class="list-group-item"><strong>Gender:</strong> <span id="detailGender"></span></li>
          <li class="list-group-item"><strong>ID:</strong> <span id="detailID"></span></li>
          <li class="list-group-item"><strong>Account Number:</strong> <span id="detailAccountNum"></span></li>
          <li class="list-group-item"><strong>Bank:</strong> <span id="detailBank"></span></li>
          <li class="list-group-item"><strong>Account Name:</strong> <span id="detailAccountName"></span></li>
        </ul>
      </div>
    </div>
  </div>
</div>


  <script>
    // Example: You can replace this with a real fetch request from your backend
    const users = [
      { id: 3, name: "Admin User", email: "admin@camgd.com", role: "Admin", date: "2025-08-09" }
    ];

    const tableBody = document.getElementById('usersTable');
    users.forEach(user => {
      const row = `
        <tr>
          <td>${user.id}</td>
          <td>${user.name}</td>
          <td>${user.email}</td>
          <td><span class="badge ${user.role === 'Admin' ? 'bg-warning' : user.role === 'Agent' ? 'bg-success' : 'bg-primary'}">${user.role}</span></td>
          <td>${user.date}</td>
          <td>
            <button class="btn btn-sm btn-outline-primary me-1"><i class="bi bi-eye"></i></button>
            <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
          </td>
        </tr>
      `;
      tableBody.insertAdjacentHTML('beforeend', row);
    });

document.getElementById("addUserForm").addEventListener("submit", function(e) {
  e.preventDefault();

  const formData = new FormData(this);
  const table = document.getElementById("usersTable");

  const firstName = formData.get("firstName");
  const lastName = formData.get("lastName");
  const email = formData.get("email");
  const role = formData.get("role");

  const badgeClass = role === "Admin" ? "bg-danger" : role === "Agent" ? "bg-success" : "bg-primary";

  const newRow = `
    <tr>
      <td></td> <!-- SN will be updated -->
      <td>${firstName} ${lastName}</td>
      <td>${email}</td>
      <td><span class="badge ${badgeClass}">${role}</span></td>
      <td>${new Date().toISOString().split("T")[0]}</td>
      <td>
        <button class="btn btn-sm btn-outline-primary me-1"><i class="bi bi-eye"></i></button>
        <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
      </td>
    </tr>
  `;

  // Insert at top instead of bottom
  table.insertAdjacentHTML("afterbegin", newRow);

  // Update SN for all rows
  Array.from(table.rows).forEach((row, index) => {
    row.cells[0].textContent = index + 1;
  });

  this.reset();
  const modal = bootstrap.Modal.getInstance(document.getElementById("addUserModal"));
  modal.hide();
});


document.addEventListener("DOMContentLoaded", () => {
  const tableBody = document.getElementById("usersTable");

  // DELETE FUNCTION
  tableBody.addEventListener("click", function(e) {
    if (e.target.closest(".btn-outline-danger")) {
      e.target.closest("tr").remove();
    }
  });

  // VIEW DETAILS FUNCTION
  tableBody.addEventListener("click", function(e) {
    if (e.target.closest(".btn-outline-primary")) {
      const row = e.target.closest("tr");
      const name = row.cells[1].innerText;
      const email = row.cells[2].innerText;
      const role = row.cells[3].innerText;

      // Dummy data for now (you can link to real stored values later)
      document.getElementById("detailName").innerText = name;
      document.getElementById("detailEmail").innerText = email;
      document.getElementById("detailRole").innerText = role;
      document.getElementById("detailPhone").innerText = "08012345678";
      document.getElementById("detailAddress").innerText = "123 Main Street";
      document.getElementById("detailCity").innerText = "Port Harcourt";
      document.getElementById("detailState").innerText = "Rivers";
      document.getElementById("detailPostal").innerText = "500001";
      document.getElementById("detailDob").innerText = "1995-05-15";
      document.getElementById("detailGender").innerText = "Male";
      document.getElementById("detailID").innerText = "ID123456";
      document.getElementById("detailAccountNum").innerText = "1234567890";
      document.getElementById("detailBank").innerText = "GTBank";
      document.getElementById("detailAccountName").innerText = name;

      // Show the details modal
      const detailsModal = new bootstrap.Modal(document.getElementById("userDetailsModal"));
      detailsModal.show();
    }
  });
});

function addUserToTable(name, email, role, dateJoined) {
  const tableBody = document.getElementById("usersTable");

  const newRow = document.createElement("tr");
  newRow.innerHTML = `
    <td></td> <!-- SN will be updated later -->
    <td>${name}</td>
    <td>${email}</td>
    <td><span class="badge ${role === 'Agent' ? 'bg-success' : 'bg-primary'}">${role}</span></td>
    <td>${dateJoined}</td>
    <td>
      <button class="btn btn-sm btn-outline-primary me-1"><i class="bi bi-eye"></i></button>
      <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
    </td>
  `;

  // Add the new row to the top
  tableBody.prepend(newRow);

  // Update SN for all rows
  Array.from(tableBody.rows).forEach((row, index) => {
    row.cells[0].textContent = index + 1;
  });
}

// Example usage:
addUserToTable("Michael King", "michael@example.com", "Buyer", "2025-08-11");

  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>



</body>
</html>
